{"version":3,"sources":["components/UserItem.js","components/UsersList.jsx","pages/Usuarios.js","components/Card.js","pages/NuevoDestino.js","components/Navbar.jsx","pages/Auth.js","App.js","index.js"],"names":["UserItem","props","UsersList","Usuarios","Card","className","style","children","NuevoDestino","tieneAcceso","datos","useForm","register","handleSubmit","onSubmit","setValue","formState","errors","data","a","axios","post","process","nombre","descripcion","direccion","creador","userId","loacalizacion","headers","Authorization","token","then","response","console","log","catch","error","type","placeholder","required","message","Navbar","aria-current","to","Auth","gestionarAcceso","useState","setTieneAcceso","email","password","pattern","minLength","onClick","undefined","App","setDatos","setToken","exact","path","acceso","dato","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bdf918d1.chunk.js","sourcesContent":["import React from 'react';\r\nimport './UserItem.css';\r\n\r\n\r\nconst UserItem = (props) => {\r\n  return (\r\n    <div>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserItem\r\n","import React from 'react';\r\nimport UserItem from './UserItem';\r\nimport './UsersList.css';\r\n\r\n\r\nconst UsersList = (props) => {\r\n  \r\n  return (\r\n    <div>\r\n      <ul>\r\n        <UserItem />\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UsersList\r\n","import React from 'react';\r\nimport UsersList from '../components/UsersList';\r\n\r\nconst Usuarios = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Usuarios</h1>\r\n\t\t\t<UsersList />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Usuarios;\r\n","import React from 'react';\n\nimport './Card.css';\n\nconst Card = props => {\n  return (\n    <div className={`card ${props.className}`} style={props.style}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import { React, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport Card from '../components/Card';\r\nimport axios from 'axios';\r\n\r\nconst NuevoDestino = (props) => {\r\n\tconst { tieneAcceso, datos } = props;\r\n\r\n\tconst {\r\n\t\tregister,\r\n\t\thandleSubmit,\r\n\t\tsetValue,\r\n\t\tformState: { errors },\r\n\t} = useForm();\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\tawait axios\r\n\t\t\t.post(\r\n\t\t\t\tprocess.env.REACT_APP_BACKEND_URL + 'destinos/',\r\n\t\t\t\t{\r\n\t\t\t\t\tnombre: data.nombre,\r\n\t\t\t\t\tdescripcion: data.descripcion,\r\n\t\t\t\t\tdireccion: data.direccion,\r\n\t\t\t\t\tcreador: datos.userId, // del prop enviado desde App.js extraemos el userId (en datos están todos los datos del token recibido desde el servidor cuando el usuario entró en su cuenta)\r\n\t\t\t\t\tloacalizacion: {},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + datos.token, // En los headers van 'Bearer ' + token recibido\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tconsole.log('Todo correcto', response.data);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.log(error.response.data);\r\n\t\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Card className='authentication'>\r\n\t\t\t<h2>Datos del destino</h2>\r\n\t\t\t<form className='card' onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Nombre'\r\n\t\t\t\t\t{...register('nombre', { required: true, message: 'Requerido' })}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Descripción'\r\n\t\t\t\t\t{...register('descripcion', {\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: 'Campo requerido',\r\n\t\t\t\t\t})}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Dirección'\r\n\t\t\t\t\t{...register('direccion', { required: true })}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='creador'\r\n\t\t\t\t\tplaceholder='Creador'\r\n\t\t\t\t\t{...register('creador', { required: true }, 'Campo requerido')}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Localización'\r\n\t\t\t\t\t{...register('localizacion')}\r\n\t\t\t\t/>\r\n\t\t\t\t<button type='submit'>Guardar datos</button>\r\n\t\t\t</form>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default NuevoDestino;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Navbar = () => {\r\n\treturn (\r\n\t\t<div className='navbar navbar-expand-lg navbar-light bg-primary'>\r\n\t\t\t<div className='navbar navbar-dark bg-primary'>\r\n\t\t\t\t<ul className='navbar-nav me-auto mb-2 mb-lg-0'>\r\n\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t<Link className='nav-link active' aria-current='page' to='/'>\r\n\t\t\t\t\t\t\tInicio\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t<Link className='nav-link' to='/destinos/nuevodestino'>\r\n\t\t\t\t\t\t\tDestinos\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t<Link className='nav-link' to='/auth'>\r\n\t\t\t\t\t\t\tAutenticar\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport './Auth.css';\r\nimport Card from '../components/Card';\r\nimport axios from 'axios';\r\n\r\nexport default function Auth(props) {\r\n\tconst { gestionarAcceso } = props; // función que usamos para pasar los datos del servidor a la App principal\r\n\tconst [tieneAcceso, setTieneAcceso] = useState(false); // variable de estado que indica si el usuario existe o no en la base de datos.\r\n\r\n\tconst {\r\n\t\tregister,\r\n\t\thandleSubmit,\r\n\t\tsetValue,\r\n\t\tformState: { errors },\r\n\t} = useForm(); // hook del formulario para 'react-hook-form'\r\n\r\n\tconst gestorDeCambioDeModo = () => {\r\n\t\tif (!tieneAcceso) {\r\n\t\t\tsetValue('Nombre', undefined);\r\n\t\t}\r\n\t\tsetTieneAcceso(!tieneAcceso);\r\n\t};\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\t// Envío de los datos del formulario ( data ) al servidor\r\n\t\tconsole.log(data);\r\n\t\tif (!tieneAcceso) {\r\n\t\t\tawait axios\r\n\t\t\t\t.post('http://localhost:5000/api/usuarios/alta', {\r\n\t\t\t\t\t// endpoint de la API de nuestro servidor\r\n\t\t\t\t\tnombre: data.nombre, // dato extraído del formulario\r\n\t\t\t\t\temail: data.email, // dato extraído del formulario\r\n\t\t\t\t\tpassword: data.password, // dato extraído del formulario\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconsole.log('Usuario creado'); // Si se recibe este mensaje en consola es que se ha dado de alta correctamente\r\n\t\t\t\t\tgestionarAcceso(response.data); // enviamos a la App la respuesta del servidor, que contiene el token creado por este, el e-mail y el password del usuario.\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(error.response.data);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tawait axios\r\n\t\t\t\t.post('http://localhost:5000/api/usuarios/login', {\r\n\t\t\t\t\temail: data.email,\r\n\t\t\t\t\tpassword: data.password,\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconsole.log('Login Correcto');\r\n\t\t\t\t\tgestionarAcceso(response.data); // enviamos a la App la respuesta del servidor, que contiene el token creado por este\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Card className='authentication'>\r\n\t\t\t<h2>{tieneAcceso ? 'Login necesario' : 'Introduzca datos de alta'}</h2>\r\n\t\t\t<form className='card' onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t{!tieneAcceso && (\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tplaceholder='Nombre de Usuario.'\r\n\t\t\t\t\t\t{...register('nombre', { required: true, message: 'Requerido' })}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Email'\r\n\t\t\t\t\t{...register('email', { required: true, pattern: /^\\S+@\\S+$/i })}\r\n\t\t\t\t/>\r\n\t\t\t\t{errors.email && errors.email.type === 'required' && (\r\n\t\t\t\t\t<span>Se requiere e-mail válido</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{errors.email && errors.email.type === 'pattern' && (\r\n\t\t\t\t\t<span>Se requiere e-mail válido</span>\r\n\t\t\t\t)}\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tplaceholder='Contraseña'\r\n\t\t\t\t\t{...register('password', { required: true, minLength: 6 })}\r\n\t\t\t\t/>\r\n\t\t\t\t{errors.password && errors.password.type === 'required' && (\r\n\t\t\t\t\t<span>Se requiere contraseña</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{errors.password && errors.password.type === 'minLength' && (\r\n\t\t\t\t\t<span>Mínimo de 6 caracteres</span>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<button type='submit'>{tieneAcceso ? 'ACCESO' : 'ALTA'} </button>\r\n\t\t\t</form>\r\n\t\t\t<button onClick={gestorDeCambioDeModo}>\r\n\t\t\t\tCAMBIAR A {tieneAcceso ? 'ALTA' : 'ACCESO'}\r\n\t\t\t</button>\r\n\t\t</Card>\r\n\t);\r\n}\r\n","import { React, useState } from 'react';\nimport {\n\tBrowserRouter as Router,\n\tRoute,\n\tRedirect,\n\tSwitch,\n} from 'react-router-dom';\nimport Usuarios from './pages/Usuarios';\nimport NuevoDestino from './pages/NuevoDestino';\nimport Navbar from './components/Navbar';\nimport Auth from './pages/Auth';\n\nconst App = () => {\n\tconst [tieneAcceso, setTieneAcceso] = useState(false);\n\tconst [datos, setDatos] = useState({});\n\tconst [token, setToken] = useState();\n\n\t// Traemos desde el componente Auth los datos del usuario enviados desde el servidor mediante esta función prop\n\tconst gestionarAcceso = (dato) => {\n\t\tsetDatos(dato); // datos del usuario: email, password y token\n\t\tsetTieneAcceso(true); // La variable que indica que está logueado se pone a true\n\t\tsetToken(dato.token); // Por si fuera necesario\n\t};\n\n\treturn (\n\t\t<Router>\n\t\t\t<Navbar />\n\t\t\t<Switch>\n\t\t\t\t<Route exact path='/'>\n\t\t\t\t\t<Usuarios />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/destinos/nuevodestino'>\n\t\t\t\t\t<NuevoDestino acceso={tieneAcceso} datos={datos} />\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/auth'>\n\t\t\t\t\t<Auth gestionarAcceso={gestionarAcceso} />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to='/' />\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n};\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}